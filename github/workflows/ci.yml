name: CI

# è§¦å‘ workflow çš„äº‹ä»¶
on: 
  push: 
    branches:
      - main

# ä¸€ä¸ªworkflowç”±æ‰§è¡Œçš„ä¸€é¡¹æˆ–å¤šé¡¹job
jobs:
  # ä¸€ä¸ªjobä»»åŠ¡ï¼Œä»»åŠ¡åä¸ºbuild
  build:
    # è¿è¡Œåœ¨æœ€æ–°ç‰ˆubuntuç³»ç»Ÿä¸­
    runs-on: ubuntu-latest
    # æ­¥éª¤åˆé›†
    steps:
      # æ–°å»ºä¸€ä¸ªåä¸º checkout çš„æ­¥éª¤
      - name: Checkout ğŸ›ï¸
        #ä½¿ç”¨checkout@v2è¿™ä¸ªactionè·å–æºç 
        uses: actions/checkout@v2
        with:
          # æŒ‡å®šåˆ†æ”¯
          ref: main
      # å®‰è£… nodejs 
      - name: Setup Node.js ğŸ”§
        uses: actions/setup-node@v1
        with:
          # å®‰è£…æŒ‡å®šç‰ˆæœ¬
          node-version: 14.18.0
      
      - name: Npm Install And Build ğŸ”§
        #æ‰§è¡Œæ‰§è¡ŒæŸä¸ªshellå‘½ä»¤æˆ–è„šæœ¬
        run: |
          npm install
          npm run build:spa
        
        # éƒ¨ç½²åˆ° gh-pages
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4.4.0
        with:
          token: ${{ github.token }}
          # è¿™æ˜¯æ‚¨å¸Œæœ›éƒ¨ç½²åˆ°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚ gh-pages æˆ– docsã€‚
          BRANCH: gh-pages
          # è¦éƒ¨ç½²çš„å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶å¤¹ã€‚å¦‚æœä½ çš„æ„å»ºè„šæœ¬ç¼–è¯‘åˆ°ä¸€ä¸ªåä¸º build çš„ç›®å½•ä¸­ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨è¿™é‡Œã€‚æ–‡ä»¶å¤¹è·¯å¾„ä¸èƒ½æœ‰å‰å¯¼ / æˆ– ./ã€‚å¦‚æœæ‚¨å¸Œæœ›éƒ¨ç½²æ ¹ç›®å½•ï¼Œæ‚¨å¯ä»¥æ”¾ç½®â€‹â€‹ä¸€ä¸ª . è¿™é‡Œã€‚
          folder: out 
